(()=>{"use strict";class e{constructor(e,t,s){this._link=e.link,this._name=e.title,this._selectorTemplate=t,this._openFotoPopUp=s}_getTemplate(){return document.querySelector(this._selectorTemplate).content.querySelector(".element").cloneNode(!0)}generateCard(){return this._element=this._getTemplate(),this._elementTrash=this._element.querySelector(".element__button-delete"),this._elementFoto=this._element.querySelector(".element__foto"),this._elementLike=this._element.querySelector(".element__button-like"),this._elementSubtitle=this._element.querySelector(".element__subtitle"),this._elementFoto.src=this._link,this._elementFoto.alt=this._name,this._elementSubtitle.textContent=this._name,this._setEventListeners(),this._element}_handleOpenFotoPopUp=()=>{this._openFotoPopUp(this._name,this._link)};_handleRemoveTrash=()=>{this._element.remove()};_handleElementLike=()=>{this._elementLike.classList.toggle("element__button-like_active")};_setEventListeners(){this._elementFoto.addEventListener("click",this._handleOpenFotoPopUp),this._elementTrash.addEventListener("click",this._handleRemoveTrash),this._elementLike.addEventListener("click",this._handleElementLike)}}class t{constructor(e,t){this._formElement=e,this._validationConfig=t,this._inputList=Array.from(e.querySelectorAll(this._validationConfig.inputSelector)),this._buttonSave=this._formElement.querySelector(this._validationConfig.submitButtonSelector)}_showInputError=(e,t)=>{const s=this._formElement.querySelector(`.${e.id}-error`);e.classList.add(this._validationConfig.inputErrorClass),s.textContent=t,s.classList.add(this._validationConfig.errorClass)};_hideInputError=e=>{const t=this._formElement.querySelector(`.${e.id}-error`);e.classList.remove(this._validationConfig.inputErrorClass),t.classList.remove(this._validationConfig.errorClass),t.textContent=""};_checkInputValidity=e=>{e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)};_hasInvalidInput=()=>this._inputList.some((e=>!e.validity.valid));_toggleButtonState=()=>{this._hasInvalidInput()?(this._buttonSave.classList.add(this._validationConfig.inactiveButtonClass),this._buttonSave.setAttribute("disabled",!0)):(this._buttonSave.classList.remove(this._validationConfig.inactiveButtonClass),this._buttonSave.removeAttribute("disabled"))};_setEventListeners=()=>{this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(e),this._toggleButtonState()}))}))};resetValid=()=>{this._toggleButtonState(),this._inputList.forEach((e=>{this._hideInputError(e)}))};enableValidation=()=>{this._setEventListeners()}}class s{constructor(e){this._popup=document.querySelector(e),this._closePopupEscape=this._popup.querySelector(".popup__close-icon")}_handleEscClose=e=>{"Escape"===e.key&&this.close(e)};_hadleCloseButton=()=>{this.close()};_hadleClickByOverlay=e=>{e.target===e.currentTarget&&this.close()};setEventListeners(){this._closePopupEscape.addEventListener("click",this._hadleCloseButton),this._popup.addEventListener("click",this._hadleClickByOverlay)}open(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}}class n extends s{constructor(e,t){super(e),this._handleSubmit=t,this._form=this._popup.querySelector(".popup__form"),this._inputList=this._form.querySelectorAll(".popup__input")}_getInputsValue(){return this._values={},this._inputList.forEach((e=>{this._values[e.name]=e.value})),this._values}setInputsValue(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleSubmit(this._getInputsValue()),this.close()}))}close(){super.close(),this._form.reset()}}const i={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__save",inactiveButtonClass:"popup__save_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"},o=document.querySelector(".profile__edit-button"),r=document.querySelector(".profile__add-button"),l=document.querySelector(".popup__form-profile"),a=document.querySelector(".popup__form-card"),p=new class{constructor(e){this._nameElement=document.querySelector(e.nameSelector),this._infoElement=document.querySelector(e.infoSelector)}getUserInfo(){return{name:this._nameElement.textContent,about:this._infoElement.textContent}}setUserInfo({name:e,about:t}){this._nameElement.textContent=e,this._infoElement.textContent=t}}({nameSelector:".profile__title",infoSelector:".profile__subtitle"}),_=new t(a,i);_.enableValidation();const u=new t(l,i);u.enableValidation();const c=new class extends s{constructor(e){super(e),this._popupImage=this._popup.querySelector(".popup__image"),this._popupCaption=this._popup.querySelector(".popup__caption")}open=(e,t)=>{this._popupImage.src=t,this._popupImage.alt=e,this._popupCaption.textContent=e,super.open()}}(".popup_type_image"),h=new class{constructor({items:e,renderer:t},s){this._container=document.querySelector(s),this._initialCards=e,this._renderer=t}addCard(){this._initialCards.forEach((e=>{this.addItem(e)}))}addItem(e){this._container.prepend(this._renderer(e))}}({items:[{title:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{title:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{title:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{title:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{title:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{title:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],renderer:t=>new e(t,"#elements_template",c.open).generateCard()},".elements-container");h.addCard();const d=new n(".popup_type_profile",(e=>{p.setUserInfo(e)})),m=new n(".popup_type_card",(e=>{h.addItem(e)}));c.setEventListeners(),d.setEventListeners(),m.setEventListeners(),o.addEventListener("click",(()=>{d.setInputsValue(p.getUserInfo()),u.resetValid(),d.open()})),r.addEventListener("click",(()=>{_.resetValid(),m.open()}))})();